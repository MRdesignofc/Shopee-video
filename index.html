<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Shop Trends</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="favicon.png">

  <link rel="stylesheet" href="style.css"/>
</head>

<body class="page">

  <!-- Header -->
  <header class="topbar">
    <div class="wrap topbar__inner">
      <a class="brand" href="#" onclick="return false;">
        <img src="favicon.png" alt="Shop Trends" class="brand__logo">
        <div class="brand__txt">
          <strong>Shop Trends</strong>
          <span>Shopee ‚Ä¢ Ofertas em alta</span>
        </div>
      </a>

      <!-- Bot√£o mobile menu -->
      <button class="iconBtn iconBtn--menu" id="menuBtn" type="button"
              aria-label="Abrir menu" aria-expanded="false" aria-controls="topnav">
        ‚ò∞
      </button>

      <nav class="topnav" id="topnav" aria-label="Navega√ß√£o">
        <a class="topnav__link is-active" href="#" data-nav="home">Home</a>
        <a class="topnav__link" href="#" data-nav="categories">Categorias</a>
        <a class="topnav__link" href="#" data-nav="deals">Deals</a>
        <a class="topnav__link" href="#" data-nav="contact">Contato</a>
      </nav>

      <div class="topbar__right">
        <div class="pill" id="meta">Atualizando...</div>
        <button class="iconBtn" id="cartBtn" type="button" aria-label="Carrinho" title="Carrinho">
          üõí
        </button>
        <button class="iconBtn" id="userBtn" type="button" aria-label="Conta" title="Conta">
          üë§
        </button>
        <button class="btn btn--ghost" id="logoutBtn" type="button">Sair</button>
      </div>
    </div>

    <!-- Overlay mobile -->
    <div class="navOverlay" id="navOverlay" hidden></div>
  </header>

  <!-- Hero / Landing -->
  <section class="hero">
    <div class="wrap hero__grid">
      <div class="hero__copy">
        <div class="hero__kicker">Os Melhores Ofertas para Voc√™!</div>
        <h1 class="hero__title">
          Produtos da <span>Shopee</span>
        </h1>

        <div class="heroSearch" role="search">
          <input id="q" class="heroSearch__input" type="search"
                 placeholder="Buscar produtos..." autocomplete="off" />
          <button id="btnSearch" class="heroSearch__btn" type="button">Buscar</button>
        </div>

        <div class="heroCats" aria-label="Atalhos de categorias">
          <!-- preenchido via JS -->
        </div>

        <div class="heroBar">
          <div class="heroBar__text">Frete gr√°tis e descontos imperd√≠veis!</div>
          <button class="btn btn--primary" id="btnDeals" type="button">Ver ofertas</button>
        </div>
      </div>

      <div class="hero__art" aria-hidden="true">
        <div class="artCard">
          <div class="artCard__badge">50% OFF</div>
          <div class="artCard__icons">
            <div class="bubble">üíé</div>
            <div class="bubble">üíÑ</div>
            <div class="bubble">üéß</div>
            <div class="bubble">üëü</div>
          </div>
          <div class="artCard__caption">
            Vitrine viva ‚Ä¢ Produtos em alta ‚Ä¢ Atualiza autom√°tico
          </div>
        </div>
      </div>
    </div>

    <div class="hero__clouds" aria-hidden="true"></div>
  </section>

  <!-- Chips (modo de navega√ß√£o de produtos) -->
  <section class="wrap chipsRow" aria-label="Filtros principais">
    <div id="cats" class="chips"></div>

    <div class="chipsRow__actions">
      <button id="toggleView" class="btn btn--ghost" type="button" aria-pressed="false">
        Miniaturas
      </button>
      <button id="onlyFav" class="btn btn--ghost" type="button" aria-pressed="false">
        Favoritos
      </button>
    </div>
  </section>

  <!-- Controles (busca / sort / cat) -->
  <section class="wrap controls">
    <div class="controls__left">
      <select id="cat" class="select">
        <option value="all">Todas categorias</option>
      </select>

      <select id="sort" class="select">
        <option value="relevance">Relev√¢ncia</option>
        <option value="newest">Vendendo agora</option>
        <option value="bestsellers">Mais vendidos</option>
        <option value="discount">Maior desconto</option>
        <option value="price_asc">Menor pre√ßo</option>
        <option value="price_desc">Maior pre√ßo</option>
      </select>
    </div>

    <div class="controls__right">
      <div class="loadingPill" id="loadingPill" hidden>
        <span class="dot"></span> Carregando...
      </div>
    </div>
  </section>

  <!-- Conte√∫do -->
  <main class="wrap content">

    <!-- HOME (vitrines) -->
    <section id="homeView" class="shelves">
      <div class="shelf">
        <div class="shelf__head">
          <h2 class="shelf__title">Vendendo agora</h2>
          <span class="shelf__hint" id="hintNow">‚Äî</span>
        </div>
        <div class="grid" id="gridNow"></div>
      </div>

      <div class="shelf">
        <div class="shelf__head">
          <h2 class="shelf__title">Mais vendidos</h2>
          <span class="shelf__hint" id="hintBest">‚Äî</span>
        </div>
        <div class="grid" id="gridBest"></div>
      </div>

      <div class="shelf">
        <div class="shelf__head">
          <h2 class="shelf__title">Ofertas</h2>
          <span class="shelf__hint" id="hintDeals">‚Äî</span>
        </div>
        <div class="grid" id="gridDeals"></div>
      </div>
    </section>

    <!-- LISTAGEM (Todos / categoria / modo now/best/deals) -->
    <section id="listView" class="listView" hidden>
      <div class="listHead">
        <h2 class="listHead__title" id="listTitle">Todos os produtos</h2>
        <div class="listHead__sub" id="listSub">‚Äî</div>
      </div>

      <div class="grid" id="gridAll"></div>

      <div class="loadMore">
        <button class="btn btn--primary" id="loadMoreBtn" type="button">
          Carregar mais
        </button>
        <div class="loadMore__hint" id="loadMoreHint"></div>
      </div>
    </section>

    <div class="footer">
      Dados atualizados automaticamente ‚Ä¢ Links podem conter afiliado ‚Ä¢ Use ‚ÄúBuscar no TikTok‚Äù para ver v√≠deos similares
    </div>
  </main>

  <!-- Modal -->
  <dialog id="modal" class="modal">
    <div class="modal__inner">
      <button class="modal__close" id="close" aria-label="Fechar">√ó</button>

      <div class="modal__media">
        <img id="m_img" alt="" />
      </div>

      <div class="modal__body">
        <div class="modal__top">
          <h2 id="m_title"></h2>
          <div class="mprice" id="m_price"></div>
          <div class="tag" id="m_cat"></div>
        </div>

        <div class="actions">
          <a class="action primary" id="m_buy" target="_blank" rel="noopener">Comprar na Shopee</a>
          <a class="action secondary" id="m_tiktok" target="_blank" rel="noopener">Buscar no TikTok</a>
        </div>

        <p class="small" style="margin-top:10px;">
          Dica: pesquise no TikTok por ‚Äúreview‚Äù, ‚Äúunboxing‚Äù e ‚Äútestando‚Äù para achar v√≠deos mais parecidos.
        </p>
      </div>
    </div>
  </dialog>

  <!-- Firebase config (OBRIGAT√ìRIO) -->
  <script src="firebase-config.js"></script>

  <!-- Guard (OBRIGAT√ìRIO) -->
  <script type="module" src="guard.js"></script>

  <!-- App -->
  <script type="module" src="products-live.js"></script>

  <!-- Menu Mobile (n√£o interfere nos seus m√≥dulos) -->
  <script>
    (function(){
      const btn = document.getElementById('menuBtn');
      const nav = document.getElementById('topnav');
      const overlay = document.getElementById('navOverlay');

      if (!btn || !nav || !overlay) return;

      function openNav(){
        nav.classList.add('is-open');
        overlay.hidden = false;
        btn.setAttribute('aria-expanded', 'true');
        document.documentElement.classList.add('noScroll');
      }
      function closeNav(){
        nav.classList.remove('is-open');
        overlay.hidden = true;
        btn.setAttribute('aria-expanded', 'false');
        document.documentElement.classList.remove('noScroll');
      }

      btn.addEventListener('click', function(){
        nav.classList.contains('is-open') ? closeNav() : openNav();
      });

      overlay.addEventListener('click', closeNav);

      nav.addEventListener('click', function(e){
        const a = e.target.closest('a');
        if (a) closeNav();
      });

      window.addEventListener('resize', function(){
        if (window.matchMedia('(min-width: 981px)').matches) closeNav();
      });
    })();
  </script>
</body>
</html>
